import{R as M,r as e,_ as m,P as C,u as g,D as d,M as F,V as U,j as o,C as I,a as z,i as v}from"./index-Bk1-QGx0.js";const W=()=>parseInt(M.replace(/\D+/g,"")),R=W(),x=R>=154?"opaque_fragment":"output_fragment";class D extends C{constructor(t){super(t),this.onBeforeCompile=(r,u)=>{const{isWebGL2:n}=u.capabilities;r.fragmentShader=r.fragmentShader.replace(`#include <${x}>`,`
        ${n?`#include <${x}>`:`#extension GL_OES_standard_derivatives : enable
#include <${x}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${R>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const _=e.forwardRef((a,t)=>{const[r]=e.useState(()=>new D(null));return e.createElement("primitive",m({},a,{object:r,ref:t,attach:"material"}))});let i,p;const $=e.createContext(null),A=new F,j=new U,k=e.forwardRef(({children:a,range:t,limit:r=1e3,...u},n)=>{const s=e.useRef(null);e.useImperativeHandle(n,()=>s.current,[]);const[c,l]=e.useState([]),[[f,h,y]]=e.useState(()=>[new Float32Array(r*3),Float32Array.from({length:r*3},()=>1),Float32Array.from({length:r},()=>1)]);e.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),g(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),A.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(r,t!==void 0?t:r,c.length),i=0;i<c.length;i++)p=c[i].current,p.getWorldPosition(j).applyMatrix4(A),j.toArray(f,i*3),s.current.geometry.attributes.position.needsUpdate=!0,p.matrixWorldNeedsUpdate=!0,p.color.toArray(h,i*3),s.current.geometry.attributes.color.needsUpdate=!0,y.set([p.size],i),s.current.geometry.attributes.size.needsUpdate=!0});const S=e.useMemo(()=>({getParent:()=>s,subscribe:E=>(l(b=>[...b,E]),()=>l(b=>b.filter(w=>w.current!==E.current)))}),[]);return e.createElement("points",m({userData:{instances:c},matrixAutoUpdate:!1,ref:s,raycast:()=>null},u),e.createElement("bufferGeometry",null,e.createElement("bufferAttribute",{attach:"attributes-position",args:[f,3],usage:d}),e.createElement("bufferAttribute",{attach:"attributes-color",args:[h,3],usage:d}),e.createElement("bufferAttribute",{attach:"attributes-size",args:[y,1],usage:d})),e.createElement($.Provider,{value:S},a))}),G=e.forwardRef(({children:a,positions:t,colors:r,sizes:u,stride:n=3,...s},c)=>{const l=e.useRef(null);return e.useImperativeHandle(c,()=>l.current,[]),g(()=>{const f=l.current.geometry.attributes;f.position.needsUpdate=!0,r&&(f.color.needsUpdate=!0),u&&(f.size.needsUpdate=!0)}),e.createElement("points",m({ref:l},s),e.createElement("bufferGeometry",null,e.createElement("bufferAttribute",{attach:"attributes-position",args:[t,n],usage:d}),r&&e.createElement("bufferAttribute",{attach:"attributes-color",args:[r,n],count:r.length/n,usage:d}),u&&e.createElement("bufferAttribute",{attach:"attributes-size",args:[u,1],count:u.length/n,usage:d})),a)}),P=e.forwardRef((a,t)=>a.positions instanceof Float32Array?e.createElement(G,m({},a,{ref:t})):e.createElement(k,m({},a,{ref:t}))),V=a=>{const t=e.useRef(),[r]=e.useState(()=>v(new Float32Array(5e3),{radius:1.2}));return g((u,n)=>{t.current.rotation.x-=n/10,t.current.rotation.y-=n/15}),o.jsx("group",{rotation:[0,0,Math.PI/4],children:o.jsx(P,{ref:t,positions:r,stride:3,frustumCulled:!0,...a,children:o.jsx(_,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},N=a=>{const t=e.useRef(),[r]=e.useState(()=>v(new Float32Array(3e3),{radius:1.5}));return g((u,n)=>{t.current.rotation.x-=n/20,t.current.rotation.y+=n/25}),o.jsx("group",{rotation:[0,0,Math.PI/4],children:o.jsx(P,{ref:t,positions:r,stride:3,frustumCulled:!0,...a,children:o.jsx(_,{transparent:!0,color:"#804dee",size:.003,sizeAttenuation:!0,depthWrite:!1})})})},B=()=>o.jsx("div",{className:"w-full h-full fixed inset-0 z-[-1] bg-black pointer-events-none",children:o.jsxs(I,{camera:{position:[0,0,1]},children:[o.jsxs(e.Suspense,{fallback:null,children:[o.jsx(V,{}),o.jsx(N,{})]}),o.jsx(z,{all:!0})]})});export{B as default};
